# API Proto Directory Structure - Final Report

**Status:** ‚úÖ COMPLETED  
**Date:** January 2, 2024  
**Commit:** `6c7dc8d`  
**Branch:** `dev`

---

## üìã Overview

–ó–∞–≤–µ—Ä—à–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è `api/proto/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –í—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–∞–π–ª—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã —Å —á–µ—Ç–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π.

## üìÅ –§–∏–Ω–∞–ª—å–Ω–∞—è –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
api/proto/
‚îú‚îÄ‚îÄ legacy/              ‚Üê Legacy –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ auth.proto
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.proto
‚îÇ   ‚îú‚îÄ‚îÄ common.proto
‚îÇ   ‚îú‚îÄ‚îÄ company.proto
‚îÇ   ‚îú‚îÄ‚îÄ company_service.proto
‚îÇ   ‚îú‚îÄ‚îÄ document.proto
‚îÇ   ‚îî‚îÄ‚îÄ document_service.proto
‚îÇ
‚îú‚îÄ‚îÄ entities/            ‚Üê –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å –æ–±—ä–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ invoice.proto
‚îÇ   ‚îú‚îÄ‚îÄ invoice_contract.proto
‚îÇ   ‚îú‚îÄ‚îÄ invoice_detail.proto
‚îÇ   ‚îú‚îÄ‚îÄ invoice_financial.proto
‚îÇ   ‚îú‚îÄ‚îÄ invoice_international.proto
‚îÇ   ‚îî‚îÄ‚îÄ party.proto
‚îÇ
‚îú‚îÄ‚îÄ dictionaries/        ‚Üê –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ bank.proto
‚îÇ   ‚îú‚îÄ‚îÄ bank_account.proto
‚îÇ   ‚îú‚îÄ‚îÄ catalog.proto
‚îÇ   ‚îú‚îÄ‚îÄ country.proto
‚îÇ   ‚îú‚îÄ‚îÄ foreign_company.proto
‚îÇ   ‚îú‚îÄ‚îÄ reference_item.proto
‚îÇ   ‚îî‚îÄ‚îÄ vat_tax_type.proto
‚îÇ
‚îú‚îÄ‚îÄ api/                 ‚Üê –ó–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api_response.proto
‚îÇ   ‚îú‚îÄ‚îÄ bank_account_requests.proto
‚îÇ   ‚îú‚îÄ‚îÄ catalog_requests.proto
‚îÇ   ‚îú‚îÄ‚îÄ foreign_company_requests.proto
‚îÇ   ‚îú‚îÄ‚îÄ invoice_requests.proto
‚îÇ   ‚îú‚îÄ‚îÄ page_info.proto
‚îÇ   ‚îî‚îÄ‚îÄ requests.proto (re-export)
‚îÇ
‚îú‚îÄ‚îÄ errors/              ‚Üê –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ errors.proto
‚îÇ
‚îú‚îÄ‚îÄ Makefile             ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md            ‚Üê –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ ANALYSIS.md          ‚Üê –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ REFACTORING.md       ‚Üê –ì–∞–π–¥ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
‚îî‚îÄ‚îÄ PROTO_STRUCTURE.md   ‚Üê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ proto
```

### –§–∞–π–ª–æ–≤–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è        | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –§–∞–π–ª—ã                                                                                                                  |
| ---------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------- |
| **legacy**       | 7          | auth, auth_service, common, company, company_service, document, document_service                                       |
| **entities**     | 6          | invoice, invoice_contract, invoice_detail, invoice_financial, invoice_international, party                             |
| **dictionaries** | 7          | bank, bank_account, catalog, country, foreign_company, reference_item, vat_tax_type                                    |
| **api**          | 7          | api_response, bank_account_requests, catalog_requests, foreign_company_requests, invoice_requests, page_info, requests |
| **errors**       | 1          | errors                                                                                                                 |
| **TOTAL**        | **28**     | proto files                                                                                                            |

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –ß—Ç–æ –ë—ã–ª–æ –°–¥–µ–ª–∞–Ω–æ

1. ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ `legacy/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**

   - –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ legacy –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Ñ–∞–π–ª—ã (auth, company, document, common)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã

2. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –ò–º–ø–æ—Ä—Ç—ã**

   - `legacy/auth_service.proto`: –∏–º–ø–æ—Ä—Ç—ã ‚Üí `legacy/auth.proto`, `legacy/common.proto`
   - `legacy/company_service.proto`: –∏–º–ø–æ—Ä—Ç—ã ‚Üí `legacy/company.proto`, `legacy/common.proto`
   - `legacy/document_service.proto`: –∏–º–ø–æ—Ä—Ç—ã ‚Üí `legacy/document.proto`, `legacy/common.proto`

3. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω Makefile**

   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –∏–∑ `legacy/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è wildcards
   - –í—Å–µ 28 proto —Ñ–∞–π–ª–æ–≤ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ proto-lib/

4. ‚úÖ **–£—Å–ø–µ—à–Ω–∞—è –ö–æ–º–ø–∏–ª—è—Ü–∏—è**
   - 28 proto —Ñ–∞–π–ª–æ–≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ
   - 31 —Ñ–∞–π–ª .pb.go —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ proto-lib/ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:
     ```
     proto-lib/
     ‚îú‚îÄ‚îÄ api/          (7 .pb.go —Ñ–∞–π–ª–æ–≤)
     ‚îú‚îÄ‚îÄ auth/         (3 .pb.go —Ñ–∞–π–ª–æ–≤)
     ‚îú‚îÄ‚îÄ common/       (1 .pb.go —Ñ–∞–π–ª)
     ‚îú‚îÄ‚îÄ company/      (3 .pb.go —Ñ–∞–π–ª–∞)
     ‚îú‚îÄ‚îÄ dictionaries/ (7 .pb.go —Ñ–∞–π–ª–æ–≤)
     ‚îú‚îÄ‚îÄ document/     (3 .pb.go —Ñ–∞–π–ª–∞)
     ‚îú‚îÄ‚îÄ entities/     (6 .pb.go —Ñ–∞–π–ª–æ–≤)
     ‚îú‚îÄ‚îÄ errors/       (1 .pb.go —Ñ–∞–π–ª)
     ‚îî‚îÄ‚îÄ go.mod
     ```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–æ/–ü–æ—Å–ª–µ

### –î–û (–ù–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ)

```
api/proto/
‚îú‚îÄ‚îÄ auth.proto              ‚Üê –ù–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ
‚îú‚îÄ‚îÄ auth_service.proto      ‚Üê –°–º–µ—à–∞–Ω–æ —Å –Ω–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
‚îú‚îÄ‚îÄ common.proto
‚îú‚îÄ‚îÄ company.proto
‚îú‚îÄ‚îÄ company_service.proto
‚îú‚îÄ‚îÄ document.proto
‚îú‚îÄ‚îÄ document_service.proto
‚îú‚îÄ‚îÄ api/                    ‚Üê –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ dictionaries/
‚îú‚îÄ‚îÄ entities/
‚îî‚îÄ‚îÄ errors/
```

### –ü–û–°–õ–ï (–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ)

```
api/proto/
‚îú‚îÄ‚îÄ legacy/                 ‚Üê –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ auth.proto
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.proto
‚îÇ   ‚îú‚îÄ‚îÄ common.proto
‚îÇ   ‚îú‚îÄ‚îÄ company.proto
‚îÇ   ‚îú‚îÄ‚îÄ company_service.proto
‚îÇ   ‚îú‚îÄ‚îÄ document.proto
‚îÇ   ‚îî‚îÄ‚îÄ document_service.proto
‚îú‚îÄ‚îÄ api/
‚îú‚îÄ‚îÄ dictionaries/
‚îú‚îÄ‚îÄ entities/
‚îî‚îÄ‚îÄ errors/
```

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è

### Proto Files

- ‚úÖ 28/28 proto —Ñ–∞–π–ª–æ–≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å proto3 –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Generated Go Code

- ‚úÖ 31 .pb.go —Ñ–∞–π–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- ‚úÖ –í—Å–µ –ø–∞–∫–µ—Ç—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ù–æ–≤–æ–π –°—Ç—Ä—É–∫—Ç—É—Ä—ã

1. **–Ø—Å–Ω–æ—Å—Ç—å**

   - Legacy –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —è–≤–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –Ω–æ–≤—ã—Ö
   - –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å —á—Ç–æ deprecated vs. –Ω–æ–≤–æ–µ

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**

   - –ü—Ä–æ—Å—Ç—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö legacy —Ñ–∞–π–ª–æ–≤ –≤ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
   - –ù–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ

3. **–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**

   - –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –≤ —Å–≤–æ–µ–π –ø–∞–ø–∫–µ
   - –õ–µ–≥—á–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
   - –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
   - –õ–µ–≥—á–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–º–ø–æ—Ä—Ç—ã

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:

- [ANALYSIS.md](./ANALYSIS.md) - –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [REFACTORING.md](./REFACTORING.md) - –≥–∞–π–¥ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É
- [PROTO_STRUCTURE.md](./PROTO_STRUCTURE.md) - –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [README.md](./README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîß –ö–∞–∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö proto —Ñ–∞–π–ª–æ–≤

```bash
cd api/proto
make proto
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ proto —Ñ–∞–π–ª–∞

1. **–ï—Å–ª–∏ —ç—Ç–æ legacy –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:**

   ```
   api/proto/legacy/my_service.proto
   ```

2. **–ï—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤—ã–π —Ç–∏–ø:**
   ```
   api/proto/entities/my_entity.proto    (–¥–ª—è –±–∏–∑–Ω–µ—Å –æ–±—ä–µ–∫—Ç–æ–≤)
   api/proto/dictionaries/my_dict.proto  (–¥–ª—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤)
   api/proto/api/my_request.proto        (–¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤)
   ```

## üöÄ Next Steps

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1

1. ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å proto —Ñ–∞–π–ª—ã
2. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (DONE –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ)
3. ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2

1. –î–æ–±–∞–≤–∏—Ç—å gRPC —Å–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API contracts
3. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è proto —Ç–∏–ø–æ–≤ –≤ Go –∫–æ–¥–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3

1. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ proto —Ñ–∞–π–ª–æ–≤ (v1/, v2/)
2. REST/HTTP –ø—Ä–∞–≤–∏–ª–∞ (grpc-gateway)
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

## üìà –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞                  | –ó–Ω–∞—á–µ–Ω–∏–µ                                               |
| ------------------------ | ------------------------------------------------------ |
| Proto —Ñ–∞–π–ª–æ–≤             | 28                                                     |
| –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–π               | 6 (legacy, entities, dictionaries, api, errors + root) |
| –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ .pb.go     | 31                                                     |
| –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π | 0                                                      |
| –û—à–∏–±–æ–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞        | 0                                                      |
| –£—Å–ø–µ—à–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–æ   | 100%                                                   |

## üéâ –ò—Ç–æ–≥–æ–≤–æ–µ –°–æ—Å—Ç–æ—è–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í–û –ö PRODUCTION ‚úÖ**

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ api/proto/ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞. –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ. –ì–æ—Ç–æ–≤–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ development –∏ production.

---

**–°–æ–∑–¥–∞–Ω–æ:** GitHub Copilot  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –í—Å–µ —Ñ–∞–π–ª—ã –≤–∞–ª–∏–¥–Ω—ã –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE
