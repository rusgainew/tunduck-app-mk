# RabbitMQ Configuration File

# ============================================
# Network & Protocol Settings
# ============================================

# Default AMQP port
listeners.tcp.default = 5672

# Default AMQP/SSL port
# listeners.ssl.default = 5671

# Management plugin port
management.tcp.port = 15672

# ============================================
# Memory Management
# ============================================

# Memory threshold for High Watermark
vm_memory_high_watermark.relative = 0.6

# Memory threshold for Low Watermark (in relative terms)
vm_memory_high_watermark_paging_ratio = 0.75

# ============================================
# Disk Space Management
# ============================================

# Disk free limit in bytes (500 MB)
disk_free_limit.absolute = 500MB

# ============================================
# Message & Queue Settings
# ============================================

# Default message TTL (milliseconds) - 24 hours
default_message_ttl = 86400000

# Max number of messages in queue per consumer
prefetch.global = false

# ============================================
# Clustering
# ============================================

# Cluster heartbeat timeout (milliseconds)
cluster_heartbeat_timeout = 60000

# ============================================
# Channel Settings
# ============================================

# Max frame size (bytes)
channel_max = 2048

# Max number of connections
max_connections = 512

# ============================================
# Performance Tuning
# ============================================

# Number of Erlang processes for channel handling
channel_workers = 8

# Number of IO threads
io_thread_pool_size = 128

# Handshake timeout
handshake_timeout = 10000

# ============================================
# Management Plugin
# ============================================

# Enable management plugin
management.load_definitions = /etc/rabbitmq/definitions.json

# CORS settings
management.cors.origins.1 = http://localhost:3000
management.cors.origins.2 = http://localhost:8000

# ============================================
# Logging
# ============================================

# Log level (info, warning, error, debug)
log.file.level = info

# Enable console logs
log.console = true
log.console.level = info

# ============================================
# Queue Master Location (if clustering)
# ============================================

# queue_master_locator = min-masters
# ============================================
# Authorization & Authentication
# ============================================
# Internal authentication backend
auth_backends.1 = internal

# Default user credentials handled via environment variables
# (RABBITMQ_DEFAULT_USER and RABBITMQ_DEFAULT_PASS)

# ============================================
# Message Acknowledgment
# ============================================
# Ack timeout (milliseconds)
consumer_timeout = 900000

# ============================================
# Custom Settings for Development
# ============================================

# Disable statistics collection to reduce overhead
collect_statistics_interval = 5000

# Allow queues to be declared with x-queue-mode = lazy
# (reduces memory consumption)
queue_master_locator = min-masters
