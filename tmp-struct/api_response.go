package models

// APIResponse представляет базовый обобщенный ответ API.
// Используется как базовая структура для всех endpoints в ESF API.
// Это универсальная структура, которая может содержать различные типы данных.
//
// Структура позволяет:
//   - Унифицировать формат ответов всех API endpoints
//   - Включить общую информацию о запросе/ответе (ID, пользователь, клиент)
//   - Поддерживать пагинацию при необходимости
//   - Возвращать ошибки в стандартном формате
//
// Поле Data используется для хранения основных данных ответа,
// тип которого зависит от конкретного endpoint.
type APIResponse struct {
	// ========== ИДЕНТИФИКАТОРЫ ЗАПРОСА/ОТВЕТА ==========

	// RequestID - Уникальный идентификатор входящего запроса.
	// Генерируется клиентом и отправляется в каждом запросе.
	// Используется для отслеживания запроса в логах системы.
	// Может быть nil, если клиент не предоставил ID запроса.
	RequestID *string `json:"requestId"`

	// ResponseID - Уникальный идентификатор ответа.
	// Генерируется сервером при обработке запроса.
	// Может использоваться для поддержки клиентом и связи с сервером.
	ResponseID *string `json:"responseId"`

	// UserID - Идентификатор пользователя, от которого пришел запрос.
	// Полезен для аудита и логирования операций.
	// Может быть nil, если информация недоступна.
	UserID *string `json:"userId"`

	// ClientID - Идентификатор клиентского приложения или системы.
	// Используется при интеграции с внешними системами через API.
	// Может быть nil.
	ClientID *string `json:"clientId"`

	// ========== ИНФОРМАЦИЯ О ПАГИНАЦИИ ==========

	// TotalElements - Общее количество элементов во всех страницах.
	// Заполняется только для endpoint'ов, возвращающих списки.
	// Может быть nil для endpoint'ов, возвращающих одиночный объект.
	TotalElements *int `json:"totalElements"`

	// TotalPage - Общее количество страниц.
	// Заполняется только для endpoint'ов, возвращающих списки с пагинацией.
	// Может быть nil.
	TotalPage *int `json:"totalPage"`

	// ========== ДАННЫЕ ОТВЕТА ==========

	// Data - Основные данные ответа.
	// Тип зависит от конкретного endpoint'а.
	// Примеры значений:
	//   - Invoice (один счет)
	//   - []*Invoice (список счетов)
	//   - []*InvoiceDetail (список деталей)
	//   - []*BankAccount (список счетов)
	//   - string (сообщение об успехе)
	//   - nil (если данных нет)
	// Используется interface{} для универсальности, но в реальности
	// тип должен соответствовать документации конкретного API endpoint'а.
	Data interface{} `json:"data"`

	// ========== ОШИБКИ ==========

	// Errors - Список ошибок, возникших при обработке запроса.
	// Заполняется только если произошли ошибки (HTTP статус >= 400).
	// Пустой slice означает отсутствие ошибок.
	// Примеры:
	//   - "Документ не найден"
	//   - "Недостаточно прав для выполнения операции"
	//   - "Некорректный формат даты"
	// Используется omitempty, чтобы не отправлять пустой slice в JSON.
	Errors []string `json:"errors,omitempty"`
}

// InvoiceListResponse представляет специализированный ответ со списком счетов-фактур.
// Используется для endpoint'ов, возвращающих список счетов с пагинацией.
//
// Пример использования:
//
//	GET /api/query/invoice/realization/all-documents?page=0&size=20
//
// Возвращает структуру со списком 20 счетов и информацией о пагинации.
type InvoiceListResponse struct {
	// RequestID - Идентификатор запроса от клиента
	RequestID *string `json:"requestId"`

	// ResponseID - Идентификатор ответа, сгенерированный сервером
	ResponseID *string `json:"responseId"`

	// UserID - Идентификатор пользователя, выполнившего запрос
	UserID *string `json:"userId"`

	// ClientID - Идентификатор клиентского приложения
	ClientID *string `json:"clientId"`

	// TotalElements - Общее количество счетов, доступных в системе
	// (не только на текущей странице, а все счета целиком)
	TotalElements int `json:"totalElements"`

	// TotalPage - Общее количество страниц для получения всех счетов
	TotalPage int `json:"totalPage"`

	// Invoices - Список счетов-фактур на текущей странице.
	// Максимальное количество элементов определяется параметром size запроса.
	// Каждый элемент содержит полную информацию о счете.
	Invoices []*Invoice `json:"invoices"`
}

// DetailListResponse представляет специализированный ответ со списком деталей счета.
// Используется для endpoint'ов, возвращающих строки/позиции счета-фактуры с пагинацией.
//
// Пример использования:
//
//	GET /api/query/detail/details-by-exchange-code?invoiceUuid=...&page=0&size=50
//
// Возвращает детали конкретного счета с информацией о пагинации.
type DetailListResponse struct {
	// RequestID - Идентификатор запроса от клиента
	RequestID *string `json:"requestId"`

	// ResponseID - Идентификатор ответа, сгенерированный сервером
	ResponseID *string `json:"responseId"`

	// UserID - Идентификатор пользователя, выполнившего запрос
	UserID *string `json:"userId"`

	// ClientID - Идентификатор клиентского приложения
	ClientID *string `json:"clientId"`

	// TotalElements - Общее количество деталей в счете
	TotalElements int `json:"totalElements"`

	// TotalPage - Общее количество страниц при разбиении на страницы
	TotalPage int `json:"totalPage"`

	// Details - Список деталей (строк) счета-фактуры на текущей странице.
	// Каждый элемент содержит информацию о товаре/услуге в счете.
	Details []*InvoiceDetail `json:"details"`
}

// BankAccountListResponse представляет специализированный ответ со списком банковских счетов.
// Используется для endpoint'ов, возвращающих список банковских счетов организации.
//
// Пример использования:
//
//	GET /api/query/legal-person/bank-accounts
//
// Возвращает все банковские счета организации (может быть без пагинации).
type BankAccountListResponse struct {
	// RequestID - Идентификатор запроса от клиента
	RequestID *string `json:"requestId"`

	// ResponseID - Идентификатор ответа, сгенерированный сервером
	ResponseID *string `json:"responseId"`

	// UserID - Идентификатор пользователя, выполнившего запрос
	UserID *string `json:"userId"`

	// ClientID - Идентификатор клиентского приложения
	ClientID *string `json:"clientId"`

	// BankAccounts - Список всех банковских счетов организации.
	// Обычно этот endpoint не использует пагинацию (возвращает все счета).
	// Каждый элемент содержит информацию о счете, банке и валюте.
	BankAccounts []*BankAccount `json:"bankAccounts"`
}

// CatalogListResponse представляет специализированный ответ со списком справочников.
// Используется для endpoint'ов, возвращающих справочник товаров/услуг организации.
//
// Пример использования:
//
//	GET /api/query/legal-person/catalogs
//
// Возвращает все элементы справочника товаров/услуг организации.
type CatalogListResponse struct {
	// RequestID - Идентификатор запроса от клиента
	RequestID *string `json:"requestId"`

	// ResponseID - Идентификатор ответа, сгенерированный сервером
	ResponseID *string `json:"responseId"`

	// UserID - Идентификатор пользователя, выполнившего запрос
	UserID *string `json:"userId"`

	// ClientID - Идентификатор клиентского приложения
	ClientID *string `json:"clientId"`

	// Catalogs - Список всех элементов справочника товаров/услуг организации.
	// Содержит все товары и услуги, которые организация может использовать в счетах.
	// Используется для быстрого заполнения счетов.
	Catalogs []*Catalog `json:"catalogs"`
}
